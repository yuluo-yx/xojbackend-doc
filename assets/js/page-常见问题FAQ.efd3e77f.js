(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{487:function(s,e,a){"use strict";a.r(e);var t=a(1),r=Object(t.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"常见问题faq"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常见问题faq"}},[s._v("#")]),s._v(" 常见问题FAQ")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("Tips")]),s._v(" "),a("p",[s._v("问题及对应的链接：")]),s._v(" "),a("ul",[a("li",[a("RouterLink",{attrs:{to:"/deploy/faq/#一、部署在centos7系统中无法正常评测-如何解决"}},[s._v("一、部署在Centos7系统中无法正常评测，如何解决？")])],1),s._v(" "),a("li",[a("RouterLink",{attrs:{to:"/deploy/faq/#二、部署时出现3306或80、443等端口号被占用"}},[s._v("二、部署时出现3306或80、443等端口号被占用")])],1),s._v(" "),a("li",[a("RouterLink",{attrs:{to:"/deploy/faq/#三、如何修改mysql、redis、nacos的密码"}},[s._v("三、如何修改MySQL、Redis、Nacos的密码？")])],1)])]),s._v(" "),a("h2",{attrs:{id:"一、部署在centos7系统中无法正常评测-如何解决"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、部署在centos7系统中无法正常评测-如何解决"}},[s._v("#")]),s._v(" 一、部署在Centos7系统中无法正常评测，如何解决？")]),s._v(" "),a("h4",{attrs:{id:"_1-问题引用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-问题引用"}},[s._v("#")]),s._v(" 1. 问题引用")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("原HOJ仓库issue引用："),a("a",{attrs:{href:"https://gitee.com/himitzh0730/hoj/issues/I5HZNP",target:"_blank",rel:"noopener noreferrer"}},[s._v("本地构建没问题 centOs 7 下构建报如下错误"),a("OutboundLink")],1)])]),s._v(" "),a("li",[a("p",[a("code",[s._v("hoj-judgeserver")]),s._v("容器一直重启，"),a("code",[s._v("docker logs hoj-judgeserver")]),s._v("查看日志发现，启动Go-judge（Sandbox）报错："),a("code",[s._v("prefork environment failed container: failed to start container fork/exec /proc/self/exe: invalid argument")])]),s._v(" "),a("p",[a("img",{attrs:{src:"/sandbox_error.webp",alt:"sandbox启动报错日志",loading:"lazy"}})])])]),s._v(" "),a("h4",{attrs:{id:"_2-如何解决"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-如何解决"}},[s._v("#")]),s._v(" 2. 如何解决")]),s._v(" "),a("p",[a("strong",[s._v("Tips：其实强烈建议换Ubuntu系统，但如果一定要使用CentOS7系统的话请看下面。")])]),s._v(" "),a("p",[s._v("由于hoj使用的判题机中的安全沙盒使用环境的特殊性，如果想在centos7系统中正常运行"),a("code",[s._v("hoj-judgeserver")]),s._v("服务，需要开启 user 命名空间来使用。")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("永久性设置操作")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" user.max_user_namespaces"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /etc/sysctl.d/98-userns.conf\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("reboot")]),s._v(" // 重启机器生效\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("临时开启操作")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /proc/sys/user/max_user_namespaces\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])]),s._v(" "),a("p",[s._v("设置完后，使用"),a("code",[s._v("docker restart hoj-judgeserver")]),s._v("重新启动"),a("code",[s._v("hoj-judgeserver")]),s._v("的docker容器即可正常评测。")]),s._v(" "),a("h2",{attrs:{id:"二、部署时出现3306或80、443等端口号被占用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、部署时出现3306或80、443等端口号被占用"}},[s._v("#")]),s._v(" 二、部署时出现3306或80、443等端口号被占用")]),s._v(" "),a("h4",{attrs:{id:"_1-问题引用-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-问题引用-2"}},[s._v("#")]),s._v(" 1. 问题引用")]),s._v(" "),a("p",[s._v("在使用"),a("code",[s._v("docker-compose up -d")]),s._v("后出现报错，关键错误信息 "),a("code",[s._v("bind 0.0.0.0:80 failed, port is already allocated")]),s._v("，相似报错如下：")]),s._v(" "),a("p",[a("img",{attrs:{src:"/startup_error.png",alt:"启动端口占用报错",loading:"lazy"}})]),s._v(" "),a("h4",{attrs:{id:"_2-如何解决-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-如何解决-2"}},[s._v("#")]),s._v(" 2. 如何解决")]),s._v(" "),a("ul",[a("li",[s._v("请优先修改与"),a("code",[s._v("docker-compose.yml")]),s._v("文件同个目录中的"),a("code",[s._v(".env")]),s._v("文件，修改指定对应端口号；")]),s._v(" "),a("li",[s._v("如果"),a("code",[s._v(".env")]),s._v("文件中没有报错信息中所说的端口号，再去修改"),a("code",[s._v("docker-compose.yml")]),s._v("文件各个模块中 "),a("code",[s._v("ports")]),s._v(" 相关的配置，比如 "),a("code",[s._v("0.0.0.0:80:8080")]),s._v(" 可以修改为 "),a("code",[s._v("0.0.0.0:8020:8080")]),s._v("，冒号后面的端口号请不要改动。")])]),s._v(" "),a("h2",{attrs:{id:"三、如何修改mysql、redis、nacos的密码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、如何修改mysql、redis、nacos的密码"}},[s._v("#")]),s._v(" 三、如何修改MySQL、Redis、Nacos的密码？")]),s._v(" "),a("h4",{attrs:{id:"_1-问题引用-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-问题引用-3"}},[s._v("#")]),s._v(" 1. 问题引用")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("在部署HOJ之前，想修改默认的密码")])]),s._v(" "),a("li",[a("p",[s._v("在部署HOJ之后，想修改已设置的密码")])])]),s._v(" "),a("h4",{attrs:{id:"_2-如何解决-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-如何解决-3"}},[s._v("#")]),s._v(" 2. 如何解决")]),s._v(" "),a("div",{staticClass:"custom-block info"},[a("p",{staticClass:"custom-block-title"},[s._v("Info")]),s._v(" "),a("p",[s._v("部署之前：修改各种默认的密码")])]),s._v(" "),a("p",[s._v("部署之前指的是还没执行"),a("code",[s._v("docker-compose up -d")]),s._v("命令，在"),a("code",[s._v("./hoj-deploy/standAlone")]),s._v("目录中还未有"),a("code",[s._v("hoj")]),s._v("文件夹（"),a("RouterLink",{attrs:{to:"/deploy/how-to-backup/"}},[s._v("hoj文件夹的介绍")]),s._v("）时，可以先修改"),a("code",[s._v(".env")]),s._v("文件里面对应各种的默认密码，保存后再执行"),a("code",[s._v("docker-compose up -d")]),s._v("启动HOJ")],1),s._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[s._v("Warning")]),s._v(" "),a("p",[s._v("部署之后：修改已设置的各种密码，那么有两种方式")])]),s._v(" "),a("ol",[a("li",[a("p",[s._v("目前网站没有重要的数据，可以直接删除在"),a("code",[s._v("./hoj-deploy/standAlone")]),s._v("目录中"),a("code",[s._v("hoj")]),s._v("文件夹，然后修改"),a("code",[s._v(".env")]),s._v("文件里面对应各种的默认密码，保存后再执行"),a("code",[s._v("docker-compose up -d")]),s._v("启动HOJ")])]),s._v(" "),a("li",[a("p",[s._v("由于网站数据比较多，不能直接删除"),a("code",[s._v("hoj")]),s._v("文件夹，那么操作如下：")]),s._v(" "),a("ul",[a("li",[a("p",[a("strong",[s._v("如果修改Redis的密码")]),s._v("：只需修改"),a("code",[s._v(".env")]),s._v("文件中的"),a("code",[s._v("REDIS_PASSWORD")]),s._v("配置，"),a("code",[s._v("docker restart hoj-redis")]),s._v("重新启动"),a("code",[s._v("hoj-redis")]),s._v("即可生效。")])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("如果修改MySQL的密码")]),s._v("：需要进入到"),a("code",[s._v("hoj-mysql")]),s._v("容器进行修改，操作如下")]),s._v(" "),a("p",[s._v("（1）进行hoj-mysql容器")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" -it hoj-mysql "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("（2）输入对应的mysql密码，进入mysql数据库")]),s._v(" "),a("p",[s._v("注意：-p 后面跟着数据库密码例如hoj123456")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("mysql -uroot -p数据库密码\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("（3）成功进入后，执行以下命令")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("mysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" use mysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nmysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" grant all PRIVILEGES on *.* to root@"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%'")]),s._v(" WITH GRANT OPTION"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \nmysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" ALTER user "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),s._v("@"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%'")]),s._v(" IDENTIFIED BY "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'新的数据库密码'")]),s._v(" PASSWORD EXPIRE NEVER"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \nmysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" ALTER user "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),s._v("@"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%'")]),s._v(" IDENTIFIED WITH mysql_native_password BY "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'新的数据库密码'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nmysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" FLUSH PRIVILEGES"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("（4） 两次exit 退出mysql和容器。")]),s._v(" "),a("p",[s._v("（5）修改"),a("code",[s._v(".env")]),s._v("文件中的"),a("code",[s._v("MYSQL_ROOT_PASSWORD")]),s._v("的密码为新的数据库密码。")]),s._v(" "),a("p",[s._v("（6）重启所有HOJ的容器："),a("code",[s._v("docker-compose restart")]),s._v("。")])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("如果修改Nacos的密码")]),s._v("：需要登录到Nacos控制台进行修改，操作如下")]),s._v(" "),a("p",[s._v("（1）浏览器中访问"),a("code",[s._v("http://ip:8848/nacos")]),s._v("，然后输入"),a("code",[s._v(".env")]),s._v("文件中默认设置的账号密码，即"),a("code",[s._v("NACOS_USERNAME")]),s._v("和"),a("code",[s._v("NACOS_PASSWORD")]),s._v("参数进行登录。（记得打开服务器8848端口号的防火墙）")]),s._v(" "),a("p",[s._v("（2）点击页面右上角的用户名，选择修改密码，在弹出的弹窗中输入新密码确认修改即可！")]),s._v(" "),a("p",[a("img",{attrs:{src:"/nacos_pwd.png",alt:"nacos修改密码",loading:"lazy"}}),s._v("\n（3）到服务器上修改"),a("code",[s._v(".env")]),s._v("文件中的"),a("code",[s._v("NACOS_PASSWORD")]),s._v("的密码为新的Nacos密码。")]),s._v(" "),a("p",[s._v("（4）重启所有HOJ的容器："),a("code",[s._v("docker-compose restart")]),s._v("。")])])])])])])}),[],!1,null,null,null);e.default=r.exports}}]);