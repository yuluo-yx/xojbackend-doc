(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{485:function(s,e,t){"use strict";t.r(e);var a=t(1),n=Object(a.a)({},(function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"如何备份"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#如何备份"}},[s._v("#")]),s._v(" 如何备份")]),s._v(" "),t("h3",{attrs:{id:"_1-单体部署"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-单体部署"}},[s._v("#")]),s._v(" 1. 单体部署")]),s._v(" "),t("p",[s._v("请到"),t("code",[s._v("~/hoj-deploy/standAlone")]),s._v("的目录下，即是与"),t("code",[s._v("docker-compose.yml")]),s._v("的文件同个目录下，该目录下有个叫"),t("code",[s._v("hoj")]),s._v("的文件夹，里面的文件夹介绍如下：")]),s._v(" "),t("div",{staticClass:"language-html line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-html"}},[t("code",[s._v("hoj\n├── file   \t\t# 存储了上传的图片、上传的临时题目数据、markdown引用的文件等文件\n├── judge  \t\t# 存储了每个提交题目的评测过程产生的数据\n├── log    \t\t# 存储了hoj-backend项目的运行日志\n├── testcase    # 存储了题目的评测数据\n└── data        \n    ├── mysql\n    │   ├── data # 存储了MySQL数据库的数据\n    ├── redis\n    │   ├── data # 存储了redis产生的快照数据\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("p",[s._v("那么，如果需要备份，只需将该"),t("code",[s._v("hoj")]),s._v("文件夹复制一份即可，在新的机器上重新部署新的hoj的时候，将该文件夹放置与"),t("code",[s._v("docker-compose.yml")]),s._v("一个目录下，使用"),t("code",[s._v("docker-compose up -d")]),s._v("即可启动恢复原来的数据。")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("Tips")]),s._v(" "),t("p",[s._v("注意：在新机器上启用备份的数据的操作顺序如下：")]),s._v(" "),t("ol",[t("li",[s._v("先将"),t("code",[s._v("hoj")]),s._v("文件夹先复制到"),t("code",[s._v("~/hoj-deploy/standAlone")]),s._v("目录里面（保证该目录无"),t("code",[s._v("hoj")]),s._v("文件夹，干净！）")]),s._v(" "),t("li",[s._v("然后修改"),t("code",[s._v(".env")]),s._v("文件的配置，主要是"),t("code",[s._v("Redis")]),s._v(","),t("code",[s._v("Nacos")]),s._v(","),t("code",[s._v("MySQL")]),s._v("等的密码配置，与原先备份"),t("code",[s._v("hoj")]),s._v("文件夹时的老机器的配置一致！")]),s._v(" "),t("li",[s._v("最后再使用"),t("code",[s._v("docker-compose up -d")]),s._v("启动！")])])])])}),[],!1,null,null,null);e.default=n.exports}}]);